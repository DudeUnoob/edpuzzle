<!DOCTYPE html>
<!-- Designined by CodingLab | www.youtube.com/codinglabyt -->
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <!--<title> Responsiive Admin Dashboard | CodingLab </title>-->
    <link rel="stylesheet" href="style.css">
    <!-- Boxicons CDN Link -->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">

     <link rel="stylesheet" href="/dashboard/main_dashboard.css">
   </head>
<body>
  <div class="sidebar">
    <div class="logo-details">
      
    </div>
      <ul class="nav-links">
        <li>
          <a href="#" class="active">
            <i class='bx bx-grid-alt' ></i>
            <span class="links_name">Dashboard</span>
          </a>
        </li>
        <!-- <li>
          <a href="/products">
            <i class='bx bx-box' ></i>
            <span class="links_name">Product</span>
          </a>
        </li> -->
        
        <li>
          <a href="#">
            <i class='bx bx-pie-chart-alt-2' ></i>
            <span class="links_name">Analytics</span>
          </a>
        </li>
        
        
        <li>
          <a href="/dashboard/user">
            <i class='bx bx-user' ></i>
            <span class="links_name">User</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-message' ></i>
            <span class="links_name">Messages</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-heart' ></i>
            <span class="links_name">Favrorites</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-cog' ></i>
            <span class="links_name">Setting</span>
          </a>
        </li>
        <li class="log_out">
          <a href="#">
            <i class='bx bx-log-out'></i>
            <span class="links_name">Log out</span>
          </a>
        </li>
      </ul>
  </div>
  <section class="home-section">
    <nav>
      <div class="sidebar-button">
        <i class='bx bx-menu sidebarBtn'></i>
        <span class="dashboard">Dashboard</span>
      </div>
      <div class="search-box">
        <input type="text" placeholder="Search...">
        <i class='bx bx-search' ></i>
      </div>
      <div class="profile-details">
        <!--<img src="images/profile.jpg" alt="">-->
        <span class="admin_name">Prem Shahi</span>
        <i class='bx bx-chevron-down' ></i>
      </div>
    </nav>

    <div class="home-content">
      <div class="overview-boxes">
        <div class="box">
          <div class="right-side">
            <div class="box-topic">Server</div>
            <div class="number" id="server_name"></div>
            <div class="indicator">
              <img id="server_image"/>
              <span class="text"></span>
            </div>
          </div>
          <img />
        </div>
        <div class="box">
          <div class="right-side">
            <div class="box-topic">Region</div>
            <div class="number" id="server_region">38,876</div>
            <div class="indicator">
              
              <span class="text"></span>
            </div>
          </div>
          
        </div>
        <div class="box">
          <div class="right-side">
            <div class="box-topic">Owner</div>
            <div class="number" id="server_owner" style="font-size: 20px;">$12,876</div>
            <div class="indicator">
              
              
            </div>
          </div>
          
        </div>
        <div class="box">
          <div class="right-side">
            <div class="box-topic">Description</div>
            <div class="number" id="server_description" style="font-size: 20px;"></div>
            <div class="indicator">
              
              <span class="text"></span>
            </div>
          </div>
          
        </div>
      </div>

      <div class="sales-boxes">
        <div class="recent-sales box">
          <div class="title">Roles</div>
          <div class="sales-details">
            <ul class="details" id="role_name">
              <li class="topic" >Name</li>
              <!-- <li><a href="#">02 Jan 2021</a></li>
              <li><a href="#">02 Jan 2021</a></li>
              <li><a href="#">02 Jan 2021</a></li>
              <li><a href="#">02 Jan 2021</a></li>
              <li><a href="#">02 Jan 2021</a></li>
              <li><a href="#">02 Jan 2021</a></li>
              <li><a href="#">02 Jan 2021</a></li> -->
            </ul>
            <ul class="details" id="role_id">
            <li class="topic" >Id</li>
            <!-- <li><a href="#">Alex Doe</a></li>
            <li><a href="#">David Mart</a></li>
            <li><a href="#">Roe Parter</a></li>
            <li><a href="#">Diana Penty</a></li>
            <li><a href="#">Martin Paw</a></li>
            <li><a href="#">Doe Alex</a></li>
            <li><a href="#">Aiana Lexa</a></li>
            <li><a href="#">Rexel Mags</a></li>
             <li><a href="#">Tiana Loths</a></li> -->
          </ul>
          <ul class="details" id="role_permissions">
            <li class="topic" >Permissions</li>
            <!-- <li><a href="#">Delivered</a></li>
            <li><a href="#">Pending</a></li>
            <li><a href="#">Returned</a></li>
            <li><a href="#">Delivered</a></li>
            <li><a href="#">Pending</a></li>
            <li><a href="#">Returned</a></li>
            <li><a href="#">Delivered</a></li>
             <li><a href="#">Pending</a></li>
            <li><a href="#">Delivered</a></li> -->
          </ul>
          <ul class="details" id="role_mentionable">
            <li class="topic" >Mentionable</li>
            <!-- <li><a href="#">$204.98</a></li>
            <li><a href="#">$24.55</a></li>
            <li><a href="#">$25.88</a></li>
            <li><a href="#">$170.66</a></li>
            <li><a href="#">$56.56</a></li>
            <li><a href="#">$44.95</a></li>
            <li><a href="#">$67.33</a></li>
             <li><a href="#">$23.53</a></li>
             <li><a href="#">$46.52</a></li> -->
          </ul>
          </div>
          <div class="button">
            <a href="#">See All</a>
          </div>
        </div>
        <div class="top-sales box">
          <div class="title">Server Members</div>
          <ul class="top-sales-details" id="server_members">
            
          </ul>
        </div>
      </div>
    </div>
  </section>

  <script>
   let sidebar = document.querySelector(".sidebar");
let sidebarBtn = document.querySelector(".sidebarBtn");
sidebarBtn.onclick = function() {
  sidebar.classList.toggle("active");
  if(sidebar.classList.contains("active")){
  sidebarBtn.classList.replace("bx-menu" ,"bx-menu-alt-right");
}else
  sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
}

const adminName = document.getElementsByClassName('admin_name')[0]

fetch('/api/v1/user').then(res => res.json())
.then(data => {
  adminName.innerHTML = data.user.username
})

const serverName = document.getElementById("server_name")
const serverImage = document.getElementById("server_image")
const serverRegion = document.getElementById("server_region")
const serverOwner = document.getElementById("server_owner")
const serverMembers = document.getElementById("server_members")
const serverDescription = document.getElementById("server_description")

const roleName = document.getElementById("role_name")
const roleId = document.getElementById("role_id")
const roleMentionable = document.getElementById("role_mentionable")
const rolePermissions = document.getElementById("role_permissions")

fetch('/api/v1/guild').then(res => res.json())
.then(data => {
  serverName.innerHTML = data.name
  serverImage.src = `https://cdn.discordapp.com/icons/${data.id}/${data.icon}.webp?size=96`
  serverDescription.innerHTML = data.description
  serverImage.style.borderRadius = '50%'
  serverRegion.textContent = data.region
  serverOwner.textContent = data.owner_id


  data.roles.map(role => {
    const aTagName = document.createElement("a")
    aTagName.href = "#"
    const liTagName = document.createElement("li")

    aTagName.innerHTML = role.name

    liTagName.appendChild(aTagName)

    roleName.appendChild(liTagName)


    const aTagId = document.createElement("a")
    aTagId.href = "#"
    const liTagId = document.createElement("li")

    aTagId.innerHTML = role.id

    liTagId.appendChild(aTagId)

    roleId.appendChild(liTagId)


    const aTagPermissions = document.createElement("a")
    aTagPermissions.href = "#"
    const liTagPerimssions = document.createElement("li")

    aTagPermissions.innerHTML = role.permissions

    liTagPerimssions.appendChild(aTagPermissions)
    rolePermissions.appendChild(liTagPerimssions)


    const aTagMentionable = document.createElement("a")
    aTagMentionable.href = "#"
    const liTagMentionable = document.createElement("li")

    aTagMentionable.innerHTML = role.mentionable

    liTagMentionable.appendChild(aTagMentionable)
    roleMentionable.appendChild(liTagMentionable)
    })
})

fetch('/api/v1/guild/members')
.then(res => res.json()).then(data => {
  data.map(member => {
    
    const person = document.createElement("span")
    const personDiscriminator = document.createElement('span')
    personDiscriminator.className = 'price'
    const emptyList = document.createElement("li")
    const aPerson = document.createElement('a')
    personDiscriminator.innerHTML = "#" + member.user.discriminator
    aPerson.href = "#"
    person.className = 'product'
    person.innerHTML = member.user.username

    aPerson.appendChild(person)

    emptyList.appendChild(aPerson)
    emptyList.appendChild(personDiscriminator)

    serverMembers.appendChild(emptyList)

  })
})

 </script>

</body>
</html>

